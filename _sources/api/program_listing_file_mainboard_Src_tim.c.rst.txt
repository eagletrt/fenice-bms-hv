
.. _program_listing_file_mainboard_Src_tim.c:

Program Listing for File tim.c
==============================

|exhale_lsh| :ref:`Return to documentation for file <file_mainboard_Src_tim.c>` (``mainboard/Src/tim.c``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   
   /* Includes ------------------------------------------------------------------*/
   #include "tim.h"
   
   /* USER CODE BEGIN 0 */
   
   /* USER CODE END 0 */
   
   TIM_HandleTypeDef htim2;
   
   /* TIM2 init function */
   void MX_TIM2_Init(void)
   {
     TIM_ClockConfigTypeDef sClockSourceConfig = {0};
     TIM_MasterConfigTypeDef sMasterConfig = {0};
   
     htim2.Instance = TIM2;
     htim2.Init.Prescaler = 16999;
     htim2.Init.CounterMode = TIM_COUNTERMODE_UP;
     htim2.Init.Period = 9999;
     htim2.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
     htim2.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_DISABLE;
     if (HAL_TIM_Base_Init(&htim2) != HAL_OK)
     {
       Error_Handler();
     }
     sClockSourceConfig.ClockSource = TIM_CLOCKSOURCE_INTERNAL;
     if (HAL_TIM_ConfigClockSource(&htim2, &sClockSourceConfig) != HAL_OK)
     {
       Error_Handler();
     }
     sMasterConfig.MasterOutputTrigger = TIM_TRGO_RESET;
     sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_ENABLE;
     if (HAL_TIMEx_MasterConfigSynchronization(&htim2, &sMasterConfig) != HAL_OK)
     {
       Error_Handler();
     }
   
   }
   
   void HAL_TIM_Base_MspInit(TIM_HandleTypeDef* tim_baseHandle)
   {
   
     if(tim_baseHandle->Instance==TIM2)
     {
     /* USER CODE BEGIN TIM2_MspInit 0 */
   
     /* USER CODE END TIM2_MspInit 0 */
       /* TIM2 clock enable */
       __HAL_RCC_TIM2_CLK_ENABLE();
   
       /* TIM2 interrupt Init */
       HAL_NVIC_SetPriority(TIM2_IRQn, 0, 0);
       HAL_NVIC_EnableIRQ(TIM2_IRQn);
     /* USER CODE BEGIN TIM2_MspInit 1 */
   
     /* USER CODE END TIM2_MspInit 1 */
     }
   }
   
   void HAL_TIM_Base_MspDeInit(TIM_HandleTypeDef* tim_baseHandle)
   {
   
     if(tim_baseHandle->Instance==TIM2)
     {
     /* USER CODE BEGIN TIM2_MspDeInit 0 */
   
     /* USER CODE END TIM2_MspDeInit 0 */
       /* Peripheral clock disable */
       __HAL_RCC_TIM2_CLK_DISABLE();
   
       /* TIM2 interrupt Deinit */
       HAL_NVIC_DisableIRQ(TIM2_IRQn);
     /* USER CODE BEGIN TIM2_MspDeInit 1 */
   
     /* USER CODE END TIM2_MspDeInit 1 */
     }
   }
   
   /* USER CODE BEGIN 1 */
   
   /* USER CODE END 1 */
   
   /************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/
